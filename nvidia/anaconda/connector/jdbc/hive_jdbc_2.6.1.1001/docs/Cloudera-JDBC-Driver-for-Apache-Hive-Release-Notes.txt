==============================================================================
Cloudera JDBC Driver for Apache Hive Release Notes 
==============================================================================

The release notes provide details of enhancements, features, breaking 
changes, and known issues in Cloudera JDBC Driver for Apache Hive 2.6.1, as 
well as the version history. 


2.6.1 ======================================================================= 

Released 2018-04-27

Enhancements & New Features

 * Improved installation process

   Third-party libraries are now bundled with the driver as a shaded jar file.

 * Updated hive-service

   The driver has been upgraded to use hive-service-2.0.1 with JDBC 4.1 and 
   hive-service-1.1.1 for JDBC 4.

 * Updated third-party libraries

   The driver has been upgraded to use http-client 4.5.3, http-core 4.4.6, 
   commons-codec 1.9, commons-logging 1.2, and Zookeeper 3.4.11.


Resolved Issues
The following issues were resolved in Cloudera JDBC Driver for Apache Hive 
2.6.1.

 * [00115543] A string literal after a back-tick ( ` ) is treated as a 
   comment.

 * [00115424] When the driver attempts to connect to the server using 
   Beeline, an error occurs on the server and an exception is logged by the 
   driver. 

   This issue has been resolved. Now, when connecting to the server using 
   Beeline, connection properties such as "driver" and "url" are no longer 
   treated as configuration properties for the server, and the driver does 
   not send SET queries to the server with these properties.

 * [00114906] The driver removes query comments and hints when the 
   UseNativeQuery property is set to 1.


Breaking Changes =============================================================

The following are breaking changes to driver functionality. These changes may 
cause some workflows from earlier versions of the driver to fail.


2.6.1 -----------------------------------------------------------------------

 * Removed support for JDBC 3 (Java 5)

   Beginning with this release, the driver no longer supports JDBC 3 (Java 
   5). Only JDBC 4 (Java 6) and JDBC 4.1 (Java 7) are supported.


Version History ==============================================================

2.5.20 ----------------------------------------------------------------------- 

Released 2017-12-22

Enhancements & New Features

 * Hive 2.1 now supported

   The driver now supports Apache Hive versions 0.11 through 2.1.

 * Hadoop Delegation Tokens now supported

   The driver now supports authentication using Hadoop Delegation Tokens. For 
   more information, see the Installation and Configuration Guide.

 * [00097507] SubjectAlternativeNames host name matching now supported

   The driver now supports SubjectAlternativeNames host name matching for 
   SSL certificates.

 * AllowAllHostNames option deprecated

   The driver configuration option AllowAllHostNames, which could be used to 
   disable TLS/SSL host name verification, has been deprecated. Instead, use 
   the option CAIssuedCertsMismatch. For more information about configuring 
   TLS/SSL options in the driver, see the Install and Configuration Guide.

 * Support for executeAsync and getYarnATSGuid
 
   Users can now use the IHadoopStatement interface to execute a SQL statement
   asynchronously, and retrieve the Yarn ATS GUID for an executing query.
 
 * Updated Kerberos support

   The driver now supports using Kerberos authentication with http
   transportMode.


Resolved Issues
The following issues have been resolved in Cloudera JDBC Driver for Apache 
Hive 2.5.20.

 * [00097540] When next() is called for a second time on a ResultSet that 
   does not have any more rows, an incorrect exception is thrown.

   This issue has been resolved. The driver now returns False.

 * If a query contains both a DISTINCT and an ORDER BY clause, the ORDER BY 
   clause is ignored.

 * [00095678] If there are over 400 concurrent connections, an Out Of Memory 
   error may occur.

 * [00095678] If there are over 400 concurrent connections, the log files 
   may be deleted.

 * [00095678] Exceptions are not logged or thrown during catalog function 
   calls.

 * [00098137] AllowSelfSignedCerts does not disable SSL.

   This issue has been resolved. Now, when the AllowSelfSignedCerts property 
   is set to 1, SSL verification is disabled. The driver does not verify the 
   server certificate against the trust store, and does not verify if the 
   server's host name matches the CN or Subject Alternative Names in the 
   server certificate.

   This behavior is consistent with Cloudera JDBC Driver for Apache Hive 
   2.5.18 and earlier.

 * Translations are incorrect when queries have both JOIN and GROUP BY clauses.  

 * Joins involving more than three tables fail.

 * Scalar function column names without aliases are returned with extra
   information appended.


2.5.19 ----------------------------------------------------------------------- 

Released 2017-04-06

Enhancements & New Features 

 * AsyncExecPollInterval Configuration option
 
   You can now confiugure how often the driver polls the server for query
   execution staus.
   
 * WEEK function now supported

   As of this version, the driver now supports translation of the WEEK
   function.


Resolved Issues 
The following issues have been resolved in Cloudera JDBC Driver for Apache 
Hive 2.5.19. 

 * In some configuratiuons users would recieve a NullPointer system message
   when attempting to connect to the server. 
   
 * The driver sometimes returns fewer rows than expected if the JVM is running 
   low on memory, even though no errors are reported.
   
 * ORDER BY queries that contain subqueries are translated incorrectly.

 * In certain situations, the driver returns a different ResultSet column 
   name depending on whether UseNativeQuery is enabled or disabled.

 * If allowHostnameMismatch is set to 0, the driver does not compare the
   host name and the common name of the SSL server.

 * If allowSelfSignedCert is set to 1, the driver does not verify the SSL 
   certificate.


2.5.18 -----------------------------------------------------------------------

Released 2016-11-30

Enhancements & New Features 

 * [Salesforce: 00090277] Support added for specifying how the driver obtains 
   the Kerberos Subject
 
   When using Kerberos authentication, you can now configure the KrbAuthType
   connection property to specify how the driver obtains the Kerberos Subject.
   For more information, see the Installation and Configuration Guide.
   
   
Resolved Issues 
The following issues were resolved in Cloudera JDBC Driver for Apache Hive 
2.5.18. 

 * In some cases, when the heap size is restricted, the driver retrieves
   fewer rows than expected but does not return any exceptions or errors.

   The driver now retrieves the correct number of rows when the heap size is
   restricted.


2.5.17 -----------------------------------------------------------------------

Released 2016-09-29

Enhancements & New Features 

 * Support added for connecting via the HTTP transport protocol
 
   You can now use the new transportMode and httpPath connection properties 
   to configure the driver to connect through the HTTP transport protocol. The
   default UID and PWD values in the driver have been updated for improved 
   compatibility with these new connection properties, and the default 
   AuthMech value now depends on the transportMode setting. For more 
   information, see the Installation and Configuration Guide.

 * Support added for configuring host name verification for SSL connections
 
   You can now use the AllowAllHostNames connection property to specify 
   whether host name verification is enabled for SSL connections.

 * Updated handling of socket timeouts
   
   The driver now uses 30 as the default value for the SocketTimeout property. 
   If a socket read operation takes longer than 30 seconds to complete, then 
   the driver closes the connection. Also, error messages for socket timeouts 
   have been improved for clarity.

   
Resolved Issues 
The following issues were resolved in Cloudera JDBC Driver for Apache Hive 
2.5.17. 

 * The driver throws a null pointer exception upon calling 
   Driver.getPropertyInfo(). 
   
 * The buffer length and consequently char octet length defaults to 0 for CHAR
   and VARCHAR types. 

 * [13952] Query translation drops brackets around OR clauses. 

 * Driver returns error when casting to TIMESTAMP and DATE in SQL statement
 
 * Inserting a false Boolean value as 0 inserts TRUE
 
 * When the setQueryTimeout() method is called and the query processing time 
   exceeds the query timeout value, the driver returns a socket timeout error.

   The driver now returns the correct error for query timeouts 
   (SqlTimeoutException).


2.5.16 -----------------------------------------------------------------------

Released 2015-11-12

Resolved Issues 
The following issues were resolved in Cloudera JDBC Driver for Apache Hive 
2.5.16. 

 * DatabaseMetaData.getColumns() does not return complex type fields through 
   the JDBC driver.
 
   The driver now partially supports Array, Struct, Map, and Union SQL types. 
   These types are mapped to Varchar.

 * Hive Server 1 and Hive Server 2 drivers cannot run at the same time in the 
   same JVM.
   
   This issue has been resolved. Before, the HS1Driver and HS2Driver could not 
   coexist in the same JVM; loading both drivers at the same time caused a 
   Hive Server 2 connection failure. You can now run both drivers at the same 
   time in the same JVM.


2.5.15 -----------------------------------------------------------------------

Released 2015-07-20

Resolved Issues 
The following issues were resolved in Cloudera JDBC Driver for Apache Hive 
2.5.15. 

 * In some cases, the getTables catalog function returns table types 
   incorrectly.

 * The REMARKS table metadata column does not contain the correct data.
 
   This issue has been resolved. Previously, the REMARKS table metadata column 
   was hard-coded, so the data in the column could not be changed. You can now 
   work with the column as expected.

 * In some cases, driver performance is slow when using catalog functions to 
   retrieve metadata.
   
   This issue has been resolved. Previously, the way that the driver retrieved 
   metadata involved retrieving and processing more data than was necessary. 
   Now, the behavior in the driver is optimized and performance has improved 
   significantly.

 * In CDH 4.x or earlier, in some cases nested calls cause the driver to 
   return a "Read a negative frame size" error.


2.5.14 -----------------------------------------------------------------------

Released 2015-07-02

Enhancements & New Features 

 * Support added for case-insensitive treatment of catalog names, schema names, 
   table names, and column names in catalog function calls
   
   The driver is now able to work with catalogs, schemas, tables, and columns 
   as expected regardless of whether the names are spelled with upper- or 
   lower-case characters.

 * Optimized metadata retrieval
 
   The driver is now designed to push catalog function restrictions down to 
   the server for processing when possible, which improves driver performance 
   during metadata retrieval.

   
Resolved Issues 
The following issues were resolved in Cloudera JDBC Driver for Apache Hive 
2.5.14. 

 * Driver returns duplicate data for the getColumns JDBC API when the table 
   restriction contains a wildcard. 

 * In some cases, the driver fails to retrieve columns metadata from tables 
   that contain partitioned columns.

 * Driver sends a separate DESC <table> query for each DECIMAL, VARCHAR, and 
   CHAR column in the queried table.
   
   This issue has been resolved. Now, the driver sends only one DESC <table> 
   query for the queried table.

 * The RowsFetchedPerBlock setting limits the amount of schemas, tables, and 
   columns metadata retrieved from Hive Server 2 instances.
   
   This issue has been resolved. The RowsFetchedPerBlock setting now works as 
   expected, and only limits the maximum number of rows retrieved per fetch 
   call.


2.5.13 -----------------------------------------------------------------------

Released 2015-06-16

Resolved Issues 
The following issues were resolved in Cloudera JDBC Driver for Apache Hive 
2.5.13. 

 * Driver does not support the LENGTH scalar function for non-character 
   columns.
 
   This issue has been resolved. You can now call the LENGTH function on any 
   data type that can be converted to STRING.

 * Driver cannot execute "SET <key>=<value>" statements using executeUpdate().

 * Driver cannot execute SET statements with leading or trailing spaces.
 
   This problem has been resolved. Before, the driver returned an error if a 
   SET statement started or ended with spaces. The driver is now able to parse 
   the statement and execute it successfully.

 * TCP connections do not close when connection.close() is called.
 
   This issue has been resolved. Before, TCP connections did not close when
   connection.close() was called, and only closed when the client application 
   closed. Now, TCP connections close immediately after connection.close() is 
   called.

 * When handling multiple connections at the same time, in some cases the 
   driver will retrieve the wrong data.
   
   This issue has been resolved. Driver support for multithreading has been 
   fixed and the driver will now return the correct data when there are 
   multiple connections.


2.5.12 -----------------------------------------------------------------------

Released 2015-05-06

Resolved Issues 
The following issues were resolved in Cloudera JDBC Driver for Apache Hive 
2.5.12. 

 * The getColumns() function returns an empty result set if it uses both 
   schema and table restrictions, and the table restriction contains an 
   escaped wildcard character.
   
   This issue has been resolved. The getColumns() function now returns the 
   correct result set.

 * Query translation does not use the database context specified by a USE 
   <database> query.
   
   This issue has been resolved. Now, when you change the database context by 
   executing a USE <database> query, any subsequent query translation will use 
   that database context.


2.5.11 -----------------------------------------------------------------------

Released 2015-04-16

Enhancements & New Features 

 * SSL now configured separately from authentication
 
   Before, you would enable SSL in the driver by setting the authentication 
   mechanism to "User Name and Password with Secure Sockets Layer" 
   (AuthMech=4) or "No Authentication with Secure Sockets Layer" (AuthMech=5). 
   You can now use the new SSL property to enable or disable SSL connections, 
   and use the AuthMech property solely to configure authentication.

   
Resolved Issues 
The following issues were resolved in Cloudera JDBC Driver for Apache Hive 
2.5.11.

 * Driver does not report an error when a MapReduce job fails on the server 
   side during query execution.
   
   This issue has been resolved. The driver now reports an error if a 
   MapReduce job fails.


============================================================================== 
Contact Us 
============================================================================== 

If you are having difficulties using the driver, our Community Forum 
(http://community.cloudera.com) may have your solution. In addition to 
providing user to user support, our forums are a great place to share your 
questions, comments, and feature requests with us. 

If you are a Subscription customer you may also use the Cloudera Support 
Portal (http://www.cloudera.com/content/cloudera/en/support/home.html) to 
search the Knowledge Base or file a Case.

Important: To help us assist you, prior to contacting Cloudera Support please 
prepare a detailed summary of the client and server environment including 
operating system version, patch level, and configuration.
